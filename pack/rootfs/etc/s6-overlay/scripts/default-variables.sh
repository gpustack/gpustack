#!/bin/bash
# shellcheck disable=SC2034

# Following variables might be rewrited by config generated by GPUStack
DATA_DIR="${DATA_DIR:-/var/lib/gpustack}"
LOG_DIR="${LOG_DIR:-${DATA_DIR}/log}"
HIGRESS_DATA_DIR="${DATA_DIR}/higress"
HIGRESS_LOG_DIR="${LOG_DIR}/higress"
APISERVER_PORT=${APISERVER_PORT:-18443}
APISERVER_DATA_DIR="${HIGRESS_DATA_DIR}/apiserver"
EMBEDDED_KUBECONFIG_PATH="${EMBEDDED_KUBECONFIG_PATH:-${HIGRESS_DATA_DIR}/kubeconfig}"
GATEWAY_HTTP_PORT="${GATEWAY_HTTP_PORT:-80}"
GATEWAY_HTTPS_PORT="${GATEWAY_HTTPS_PORT:-443}"
GATEWAY_CONCURRENCY="${GATEWAY_CONCURRENCY:-16}"
ISTIO_DATA_DIR="${HIGRESS_DATA_DIR}/istio-data"

GPUSTACK_API_PORT=${GPUSTACK_API_PORT:-8080}

EMBEDDED_DATABASE_PORT="${EMBEDDED_DATABASE_PORT:-5432}"
STATE_MIGRATION_DONE_FILE="${STATE_MIGRATION_DONE_FILE:-${DATA_DIR}/run/state_migration_done}"
POSTGRES_DATA_DIR="${GPUSTACK_POSTGRES_DIR:-${DATA_DIR}/postgres/data}"

GATEWAY_CONTROLLER_GRPC_PORT="${GATEWAY_CONTROLLER_GRPC_PORT:-15051}"
GATEWAY_CONTROLLER_HTTP_PORT="${GATEWAY_CONTROLLER_HTTP_PORT:-8088}"
GATEWAY_PILOT_GRPC_PORT="${GATEWAY_PILOT_GRPC_PORT:-15010}"
GATEWAY_PILOT_TLS_GRPC_PORT="${GATEWAY_PILOT_TLS_GRPC_PORT:-15012}"
GATEWAY_PILOT_INTROSPECTION_PORT="${GATEWAY_PILOT_INTROSPECTION_PORT:-9876}"
GATEWAY_ENVOY_ADMIN_PORT="${GATEWAY_ENVOY_ADMIN_PORT:-15000}"
GATEWAY_ENVOY_HEALTHCHECK_PORT="${GATEWAY_ENVOY_HEALTHCHECK_PORT:-15021}"
GATEWAY_ENVOY_METRICS_PORT="${GATEWAY_ENVOY_METRICS_PORT:-15090}"
GATEWAY_PILOT_AGENT_METRICS_PORT="${GATEWAY_PILOT_AGENT_METRICS_PORT:-15020}"
